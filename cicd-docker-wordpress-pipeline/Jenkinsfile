pipeline {
    agent any
    
    environment {
        REPO_URL= 'https://github.com/Asaf01/ci'
        CONTAINER_NAME = "wordpress"
        IMAGE_NAME = 'wordpress'
        DIR_NAME= 'cicd-docker-wordpress-pipeline'
    }
 
   stages {
        stage('Cleanup') {
            steps {
                sh '''
                    set -e
                    rm -rf ./ci ./cicd-docker-wordpress-pipeline || true
                '''
            }
        }
   }
    stages{
        stage("clone"){
            steps{
                
                sh 'git clone ${REPO_URL}'
                sh 'pwd'
                sh 'docker build -t my_image .'
                sh 'docker images '
     }
               }   
         }

    post{
        always{
            sh 'rm -fr ${DIR_NAME}'
            
        }         
               }
}